Simulation procedure for a simplified scenario with one spatial dimension and one environmental variable. Note that capitalized variables indicate vectors. After defining the strengths of niche breadth (n) and dispersal breadth (d) the regional species pool phylogeny was generated (shown with 8 species for simplicity), species' global relative abundances (F) were randomly assigned from a lognormal abundance distribution, and species' environmental optima (T) along the environmental axis were evolved while tracking species' range centroids (R) along the spatial dimension. Environmental conditions (E) and spatial positions (S) were then defined for twenty local sites. To assemble a community at site k the environmental condition (Ek) and spatial position (Sk) of site k were compared to the environmental optima (Ti) and range centroid (Ri), respectively, for each species i. From these environmental and spatial differences probabilities were found from Gaussian distributions (blue and red curves), the variances of which were n and d, respectively. A probability of incidence for species i at site k () was then found as the product of the global relative abundance (Fi) and probabilities based on environmental () and spatial () distances for species i. To generate the vector of relative abundances for site k the regional species pool was then sampled 10,000 times with replacement, where gave the probability of choosing species i."
